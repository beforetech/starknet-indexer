syntax = "proto3";

package proto;

option go_package = "github.com/dipdup-io/starknet-indexer/pkg/grpc/pb";

import "github.com/dipdup-net/indexer-sdk/pkg/modules/grpc/proto/general.proto";
import "github.com/dipdup-io/starknet-indexer/pkg/grpc/proto/entity_filters.proto";
import "github.com/dipdup-io/starknet-indexer/pkg/grpc/proto/response.proto";


service IndexerService {
    rpc Subscribe(SubscribeRequest) returns(stream Subscription);
    rpc Unsubscribe(UnsubscribeRequest) returns (UnsubscribeResponse);
}

message SubscribeRequest {
    uint64 start_block = 1;
    bool head = 2;
    TxRequest txs = 3;
}

message Subscription {
    SubscribeResponse response = 1;
    Block block = 2;
    bool end_of_block = 3;
}
